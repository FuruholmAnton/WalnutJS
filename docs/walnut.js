!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}({"+lvF":function(t,e,n){t.exports=n("VTer")("native-function-to-string",Function.toString)},"+rLv":function(t,e,n){var r=n("dyZX").document;t.exports=r&&r.documentElement},0:function(t,e,n){n("cHq/"),n("ik0W"),t.exports=n("Hglc")},"0/R4":function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},"1MBn":function(t,e,n){var r=n("DVgA"),i=n("JiEa"),o=n("UqcF");t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),c=o.f,u=0;s.length>u;)c.call(t,a=s[u++])&&e.push(a);return e}},"2OiF":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"2Spj":function(t,e,n){var r=n("XKFU");r(r.P,"Function",{bind:n("8MEG")})},"4R4u":function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"69bn":function(t,e,n){var r=n("y3w9"),i=n("2OiF"),o=n("K0xU")("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},"6FMO":function(t,e,n){var r=n("0/R4"),i=n("EWmC"),o=n("K0xU")("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},"8+KV":function(t,e,n){"use strict";var r=n("XKFU"),i=n("CkkT")(0),o=n("LyE8")([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},"8MEG":function(t,e,n){"use strict";var r=n("2OiF"),i=n("0/R4"),o=n("MfQN"),a=[].slice,s={},c=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?c(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},A5AN:function(t,e,n){"use strict";var r=n("AvRE")(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},AvRE:function(t,e,n){var r=n("RYi7"),i=n("vhPU");t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),c=r(n),u=s.length;return c<0||c>=u?t?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):o:t?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},"C/va":function(t,e,n){"use strict";var r=n("y3w9");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},CkkT:function(t,e,n){var r=n("m0Pp"),i=n("Ymqv"),o=n("S/j/"),a=n("ne8i"),s=n("zRwo");t.exports=function(t,e){var n=1==t,c=2==t,u=3==t,l=4==t,f=6==t,h=5==t||f,p=e||s;return function(e,s,v){for(var d,g,y=o(e),m=i(y),w=r(s,v,3),x=a(m.length),b=0,E=n?p(e,x):c?p(e,0):void 0;x>b;b++)if((h||b in m)&&(g=w(d=m[b],b,y),t))if(n)E[b]=g;else if(g)switch(t){case 3:return!0;case 5:return d;case 6:return b;case 2:E.push(d)}else if(l)return!1;return f?-1:u||l?l:E}}},DVgA:function(t,e,n){var r=n("zhAb"),i=n("4R4u");t.exports=Object.keys||function(t){return r(t,i)}},EWmC:function(t,e,n){var r=n("LZWt");t.exports=Array.isArray||function(t){return"Array"==r(t)}},EemH:function(t,e,n){var r=n("UqcF"),i=n("RjD/"),o=n("aCFj"),a=n("apmT"),s=n("aagx"),c=n("xpql"),u=Object.getOwnPropertyDescriptor;e.f=n("nh4g")?u:function(t,e){if(t=o(t),e=a(e,!0),c)try{return u(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},FJW5:function(t,e,n){var r=n("hswa"),i=n("y3w9"),o=n("DVgA");t.exports=n("nh4g")?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,c=0;s>c;)r.f(t,n=a[c++],e[n]);return t}},"HAE/":function(t,e,n){var r=n("XKFU");r(r.S+r.F*!n("nh4g"),"Object",{defineProperty:n("hswa").f})},Hglc:function(t,e){},"I8a+":function(t,e,n){var r=n("LZWt"),i=n("K0xU")("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},"IU+Z":function(t,e,n){"use strict";n("sMXx");var r=n("KroJ"),i=n("Mukb"),o=n("eeVq"),a=n("vhPU"),s=n("K0xU"),c=n("Ugos"),u=s("species"),l=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var h=s(t),p=!o((function(){var e={};return e[h]=function(){return 7},7!=""[t](e)})),v=p?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[h](""),!e})):void 0;if(!p||!v||"replace"===t&&!l||"split"===t&&!f){var d=/./[h],g=n(a,h,""[t],(function(t,e,n,r,i){return e.exec===c?p&&!i?{done:!0,value:d.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),y=g[0],m=g[1];r(String.prototype,t,y),i(RegExp.prototype,h,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},Iw71:function(t,e,n){var r=n("0/R4"),i=n("dyZX").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},JiEa:function(t,e){e.f=Object.getOwnPropertySymbols},K0xU:function(t,e,n){var r=n("VTer")("wks"),i=n("ylqs"),o=n("dyZX").Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},KKXr:function(t,e,n){"use strict";var r=n("quPj"),i=n("y3w9"),o=n("69bn"),a=n("A5AN"),s=n("ne8i"),c=n("Xxuz"),u=n("Ugos"),l=n("eeVq"),f=Math.min,h=[].push,p=!l((function(){RegExp(4294967295,"y")}));n("IU+Z")("split",2,(function(t,e,n,l){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,a,s,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,p=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,l+"g");(o=u.call(v,i))&&!((a=v.lastIndex)>f&&(c.push(i.slice(f,o.index)),o.length>1&&o.index<i.length&&h.apply(c,o.slice(1)),s=o[0].length,f=a,c.length>=p));)v.lastIndex===o.index&&v.lastIndex++;return f===i.length?!s&&v.test("")||c.push(""):c.push(i.slice(f)),c.length>p?c.slice(0,p):c}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):v.call(String(i),n,r)},function(t,e){var r=l(v,t,this,e,v!==n);if(r.done)return r.value;var u=i(t),h=String(this),d=o(u,RegExp),g=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(p?"y":"g"),m=new d(p?u:"^(?:"+u.source+")",y),w=void 0===e?4294967295:e>>>0;if(0===w)return[];if(0===h.length)return null===c(m,h)?[h]:[];for(var x=0,b=0,E=[];b<h.length;){m.lastIndex=p?b:0;var _,S=c(m,p?h:h.slice(b));if(null===S||(_=f(s(m.lastIndex+(p?0:b)),h.length))===x)b=a(h,b,g);else{if(E.push(h.slice(x,b)),E.length===w)return E;for(var k=1;k<=S.length-1;k++)if(E.push(S[k]),E.length===w)return E;b=x=_}}return E.push(h.slice(x)),E}]}))},KroJ:function(t,e,n){var r=n("dyZX"),i=n("Mukb"),o=n("aagx"),a=n("ylqs")("src"),s=n("+lvF"),c=(""+s).split("toString");n("g3g5").inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,a)||i(n,a,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},Kuth:function(t,e,n){var r=n("y3w9"),i=n("FJW5"),o=n("4R4u"),a=n("YTvA")("IE_PROTO"),s=function(){},c=function(){var t,e=n("Iw71")("iframe"),r=o.length;for(e.style.display="none",n("+rLv").appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=c(),void 0===e?n:i(n,e)}},LQAc:function(t,e){t.exports=!1},LZWt:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},LyE8:function(t,e,n){"use strict";var r=n("eeVq");t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},MfQN:function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},Mukb:function(t,e,n){var r=n("hswa"),i=n("RjD/");t.exports=n("nh4g")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},N8g3:function(t,e,n){e.f=n("K0xU")},OnI7:function(t,e,n){var r=n("dyZX"),i=n("g3g5"),o=n("LQAc"),a=n("N8g3"),s=n("hswa").f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},RYi7:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},"RjD/":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"S/j/":function(t,e,n){var r=n("vhPU");t.exports=function(t){return Object(r(t))}},SRfc:function(t,e,n){"use strict";var r=n("y3w9"),i=n("ne8i"),o=n("A5AN"),a=n("Xxuz");n("IU+Z")("match",1,(function(t,e,n,s){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var c=r(t),u=String(this);if(!c.global)return a(c,u);var l=c.unicode;c.lastIndex=0;for(var f,h=[],p=0;null!==(f=a(c,u));){var v=String(f[0]);h[p]=v,""===v&&(c.lastIndex=o(u,i(c.lastIndex),l)),p++}return 0===p?null:h}]}))},Ugos:function(t,e,n){"use strict";var r,i,o=n("C/va"),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(t){var e,n,r,i,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",o.call(c))),u&&(e=c.lastIndex),r=a.call(c,t),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:e),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=c},UqcF:function(t,e){e.f={}.propertyIsEnumerable},VTer:function(t,e,n){var r=n("g3g5"),i=n("dyZX"),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n("LQAc")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},XKFU:function(t,e,n){var r=n("dyZX"),i=n("g3g5"),o=n("Mukb"),a=n("KroJ"),s=n("m0Pp"),c=function(t,e,n){var u,l,f,h,p=t&c.F,v=t&c.G,d=t&c.S,g=t&c.P,y=t&c.B,m=v?r:d?r[e]||(r[e]={}):(r[e]||{}).prototype,w=v?i:i[e]||(i[e]={}),x=w.prototype||(w.prototype={});for(u in v&&(n=e),n)f=((l=!p&&m&&void 0!==m[u])?m:n)[u],h=y&&l?s(f,r):g&&"function"==typeof f?s(Function.call,f):f,m&&a(m,u,f,t&c.U),w[u]!=f&&o(w,u,h),g&&x[u]!=f&&(x[u]=f)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},Xxuz:function(t,e,n){"use strict";var r=n("I8a+"),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},YTvA:function(t,e,n){var r=n("VTer")("keys"),i=n("ylqs");t.exports=function(t){return r[t]||(r[t]=i(t))}},Ymqv:function(t,e,n){var r=n("LZWt");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},Z6vF:function(t,e,n){var r=n("ylqs")("meta"),i=n("0/R4"),o=n("aagx"),a=n("hswa").f,s=0,c=Object.isExtensible||function(){return!0},u=!n("eeVq")((function(){return c(Object.preventExtensions({}))})),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return u&&f.NEED&&c(t)&&!o(t,r)&&l(t),t}}},aCFj:function(t,e,n){var r=n("Ymqv"),i=n("vhPU");t.exports=function(t){return r(i(t))}},aagx:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},apmT:function(t,e,n){var r=n("0/R4");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},"cHq/":function(t,e,n){"use strict";n.r(e);n("HAE/"),n("pIFo"),n("rE2o"),n("ioFf"),n("2Spj"),n("8+KV"),n("KKXr"),n("SRfc"),n("f3/d");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i,o;document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;function a(){var t=!1;return("ontouchstart"in window||window.DocumentTouch)&&(t=!0),t}function s(t){"remove"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)?(window.removeEventListener("resize",t,!0),window.removeEventListener("orientationchange",t)):(window.addEventListener("resize",t,!0),window.addEventListener("orientationchange",t))}i=function(t){console.log(t),document.fullscreenElement||t.requestFullscreen().catch((function(t){console.log("Error attempting to enable full-screen mode: ".concat(t.message," (").concat(t.name,")"))}))},o=function(){document.fullscreenElement&&document.exitFullscreen().then((function(){return console.log("Document Exited form Full screen mode")})).catch((function(t){return console.error(t)}))};n("ik0W");function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"default",(function(){return u}));var u=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n.forEach((function(e){if(!t[e])return console.warn("Method '".concat(e,"' does not exist on ").concat(r(t),":"),t);t[e]=t[e].bind(t)}))}(this,"onDragPreviewList","onDragingPreviewList","onDragEndPreviewList","nextImage","prevImage","fixViewer","fullscreen","initFlexEvents","deinitFlexEvents","handleWrapperClick","checkKeyPressed","changeHistory","swipeEnd","swipeMove","swipeStart"),this.initUI(),this.ui.images=e,this.touch={start:{},startX:0,startY:0,end:0},this.listContainer={dragstartY:0,dragendY:0,lastY:0,draging:!1,translatedY:0,dragCanceled:!1},this.allowedTouchDistance=100,this.minTouchDistance=20;for(var i=0;i<this.ui.images.length;i++){var o=this.ui.images[i];o.classList.add("walnut-image"),o.setAttribute("data-walnut-image",i),o.addEventListener("click",(function(t){n.openViewer(t)}))}}var e,n,u;return e=t,(n=[{key:"initUI",value:function(){var t=document.getElementById("walnut-viewer");this.ui={images:[],wrapper:t,list:t.getElementsByClassName("walnut__list")[0],listContainer:t.getElementsByClassName("walnut__list-container")[0],listHandle:t.getElementsByClassName("walnut__list-handle")[0],box:t.getElementsByClassName("walnut__box")[0],mainImageContainer:t.getElementsByClassName("walnut__image-container")[0],fullscreenBtn:t.getElementsByClassName("walnut__fullscreen")[0],directionArrow:t.getElementsByClassName("walnut__direction-arrow")[0],directionLine:t.getElementsByClassName("walnut__direction-line")[0],mainImage:t.getElementsByClassName("walnut__image")[0],prevBtn:t.querySelector(".walnut__navigation.walnut__navigation--prev"),nextBtn:t.querySelector(".walnut__navigation.walnut__navigation--next"),closeBtn:t.getElementsByClassName("walnut-close")[0]}}},{key:"initEvents",value:function(){var t=this.ui.wrapper;if(document.addEventListener("keyup",this.checkKeyPressed,!1),a()){var e=this.ui.mainImage;e.addEventListener("touch.start",this.swipeStart),e.addEventListener("touch.end",this.swipeEnd),e.addEventListener("touchmove",this.swipeMove)}else this.ui.nextBtn.addEventListener("click",this.nextImage),this.ui.prevBtn.addEventListener("click",this.prevImage);t.addEventListener("click",this.handleWrapperClick,!1)}},{key:"deinitEvents",value:function(){if(document.removeEventListener("keyup",this.checkKeyPressed,!1),a()){var t=this.ui.mainImage;t.removeEventListener("touch.start",this.swipeStart),t.removeEventListener("touch.end",this.swipeEnd),t.removeEventListener("touchmove",this.swipeMove)}else this.ui.nextBtn.removeEventListener("click",this.nextImage),this.ui.prevBtn.removeEventListener("click",this.prevImage);this.ui.wrapper.removeEventListener("click",this.handleWrapperClick,!1)}},{key:"handleWrapperClick",value:function(t){t.stopPropagation(),t.preventDefault();var e=t.target;if(e.isSameNode(this.ui.wrapper))this.clickWrapper(t);else if(e.matches(".walnut__item")){var n=e.getAttribute("data-walnut-source");this.changeImage(null,{source:n,target:e,index:parseInt(e.getAttribute("data-walnut-index")),container:null})}else e.isSameNode(this.ui.closeBtn)||function(t,e){for(var n=t;(n=n.parentElement)&&!n.hasAttribute(e););if(n instanceof HTMLElement)return n;for(n=t;(n=n.parentElement)&&!n.classList.contains(e););return n instanceof HTMLElement&&n}(e,"walnut-close")?this.closeViewer():(e.isSameNode(this.ui.fullscreenBtn)||function(t,e){for(var n=null;null!=t.parentElement;){if(t.parentElement.matches(e)){n=t.parentElement;break}t=t.parentElement}return n}(e,".walnut__fullscreen"))&&this.fullscreen()}},{key:"initFlexEvents",value:function(){document.addEventListener("keyup",this.checkKeyPressed),window.addEventListener("popstate",this.changeHistory),s(this.fixViewer)}},{key:"deinitFlexEvents",value:function(){document.removeEventListener("keyup",this.checkKeyPressed),window.removeEventListener("popstate",this.changeHistory),s(this.fixViewer,"remove")}},{key:"initOverviewList",value:function(){var t=this.ui.list,e=this.ui.images;if(t.innerHTML="",e.length>1)for(var n=0;n<e.length;n++){var r=document.createElement("li");r.className="walnut__item",r.style.backgroundImage="url(".concat(e[n].src,")"),r.setAttribute("data-walnut-source",e[n].src),t.appendChild(r)}}},{key:"fixListWidth",value:function(){var t=document.getElementsByClassName("walnut__item")[0].offsetWidth;document.getElementsByClassName("walnut__list")[0].style.width=this.ui.images.length*t+"px"}},{key:"openViewer",value:function(t){var e=t.target;if(void 0!==e){var n,r=parseInt(e.getAttribute("data-walnut-image")),i=this.ui.mainImage,o=this.ui.prevBtn,a=this.ui.nextBtn,s=window.getComputedStyle(e,null);if(e.dataset.walnutSrc)n=e.dataset.walnutSrc;else if(e.src)n=e.src;else{if("none"==s.backgroundImage)throw new Error("Couldn't find a image for element: "+e);n=s.backgroundImage.slice(4,-1).replace(/"/g,"")}i.src=n,this.activeIndex=r,document.body.classList.add("walnut--open");var c=this.ui.images.length;0===r&&r===c-1?(o.style.display="none",a.style.display="none"):0===r?(o.style.display="none",a.style.display=""):r===c-1?(a.style.display="none",o.style.display=""):(o.style.display="",a.style.display=""),this.initEvents(),this.initFlexEvents(),this.fixViewer(),this.ui.wrapper.classList.add("walnut__wrapper--open"),history.pushState("walnut","walnut","")}}},{key:"closeViewer",value:function(){this.activeIndex=0,this.ui.mainImage.src="",this.ui.wrapper.classList.remove("walnut__wrapper--open"),document.body.classList.remove("walnut--open"),this.deinitEvents(),this.deinitFlexEvents(),this.fullscreen("exit"),"walnut"===history.state&&window.history.back()}},{key:"changeImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,r=this.ui.prevBtn,i=this.ui.nextBtn,o=this.ui.mainImage,a=this.ui.images;if(null!=t){if(n=this.activeIndex,"next"===t&&n<a.length-1)n+=1;else{if(!("prev"===t&&n>0))return;n-=1}if(a[n]){var s="";a[n].dataset.walnutSrc?s=a[n].dataset.walnutSrc:a[n].src?s=a[n].src:"none"!=a[n].style.backgroundImage&&(s=a[n].style.backgroundImage.slice(4,-1).replace(/"/g,"")),o.src=s,this.activeIndex=n}}else e&&e.source&&(n=parseInt(e.index),o.src=e.source,this.activeIndex=n);0===n&&n===a.length-1?(r.style.display="none",i.style.display="none"):0===n?(r.style.display="none",i.style.display=""):n===a.length-1?(i.style.display="none",r.style.display=""):(r.style.display="",i.style.display=""),this.checkHeight()}},{key:"fixViewer",value:function(){this.checkHeight(),document.getElementsByClassName(".walnut__item")[0]instanceof HTMLElement&&this.fixListWidth()}},{key:"checkHeight",value:function(){var t=this.ui.box.offsetHeight,e=this.ui.wrapper;t>window.innerHeight?e.classList.add("walnut--align-top"):e.classList.remove("walnut--align-top")}},{key:"checkKeyPressed",value:function(t){var e=t.keyCode;37===e?this.changeImage("prev"):39===e?this.changeImage("next"):27===e&&this.closeViewer()}},{key:"clickWrapper",value:function(t){t.stopPropagation(),t.preventDefault(),this.closeViewer(this)}},{key:"fullscreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.ui.wrapper,n=this.ui.fullscreenBtn;"exit"===t?(o(),n.classList.remove("walnut__fullscreen--hidden")):(i(e),n.classList.add("walnut__fullscreen--hidden"))}},{key:"nextImage",value:function(){this.changeImage("next")}},{key:"prevImage",value:function(){this.changeImage("prev")}},{key:"onDragPreviewList",value:function(t){var e=t.target;this.clickTarget=e,e.matches(".walnut__list-handle")&&(t.preventDefault(),console.log("dragStart",t),this.listContainer.dragstartY=t.clientY,this.listContainer.draging=!0)}},{key:"onDragingPreviewList",value:function(t){var e=this;t.preventDefault();var n=parseFloat(t.clientY);this.listContainer.draging&&!this.listContainer.dragCanceled&&(n>this.listContainer.dragstartY+1||n<this.listContainer.dragstartY-1)&&window.requestAnimationFrame((function(){var t=e.listContainer.dragstartY,r=e.listContainer.translatedY+(n-t);r<0?e.listContainer.dragCanceled=!0:(r=Math.min(100,r),console.log("drag",r),e.ui.listContainer.style.transform="translate3d(0, ".concat(r,"px, 0)"))}))}},{key:"onDragEndPreviewList",value:function(t){this.listContainer.draging}},{key:"swipeStart",value:function(t){var e=t.changedTouches[0];this.touch.startX=parseInt(e.clientX),this.touch.startY=parseInt(e.clientY),t.preventDefault()}},{key:"swipeMove",value:function(t){var e,n,r=t.changedTouches[0],i=parseInt(r.clientX),o=parseInt(r.clientY),a=this.activeIndex,s=this.ui.directionLine,c=this.ui.directionArrow;e=Math.abs(i-this.touch.startX),n=Math.abs(o-this.touch.startY),s.style.width=40+e+"px",this.touch.startX>i&&n<this.allowedTouchDistance&&a<this.ui.images.length-1?(s.classList.remove("walnut__direction-line--active-left"),s.classList.add("walnut__direction-line--active walnut__direction-line--active-right"),c.innerHTML=""):this.touch.startX>i&&n<this.allowedTouchDistance?(s.classList.remove("walnut__direction-line--active-left"),s.classList.add("walnut__direction-line--active walnut__direction-line--active-right"),c.innerHTML=""):this.touch.startX<i&&n<this.allowedTouchDistance&&a>0?(s.classList.remove("walnut__direction-line--active-right"),s.classList.add("walnut__direction-line--active walnut__direction-line--active-left"),c.innerHTML=""):this.touch.startX<i&&n<this.allowedTouchDistance?(s.classList.remove("walnut__direction-line--active-right"),s.classList.add("walnut__direction-line--active walnut__direction-line--active-left"),c.innerHTML=""):s.classList.remove("walnut__direction-line--active walnut__direction-line--active-left walnut__direction-line--active-right"),t.preventDefault()}},{key:"swipeEnd",value:function(t){var e=t.changedTouches[0],n=parseInt(e.clientX),r=parseInt(e.clientY),i=Math.abs(r-this.touch.startY),o=Math.abs(n-this.touch.startX),a=this.ui.directionLine;this.touch.end=n,t.preventDefault(),a.classList.remove("walnut__direction-line--active"),a.classList.remove("walnut__direction-line--active-left"),a.classList.remove("walnut__direction-line--active-right"),this.touch.startX>this.touch.end&&o>this.minTouchDistance&&i<this.allowedTouchDistance?this.nextImage():this.touch.startX<this.touch.end&&o>this.minTouchDistance&&i<this.allowedTouchDistance?this.prevImage():i>200&&this.closeViewer()}},{key:"changeHistory",value:function(t){this.closeViewer()}}])&&c(e.prototype,n),u&&c(e,u),t}()},"d/Gc":function(t,e,n){var r=n("RYi7"),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},dyZX:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},e7yV:function(t,e,n){var r=n("aCFj"),i=n("kJMx").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},eeVq:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},"f3/d":function(t,e,n){var r=n("hswa").f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n("nh4g")&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},fyDq:function(t,e,n){var r=n("hswa").f,i=n("aagx"),o=n("K0xU")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},g3g5:function(t,e){var n=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},hswa:function(t,e,n){var r=n("y3w9"),i=n("xpql"),o=n("apmT"),a=Object.defineProperty;e.f=n("nh4g")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},ik0W:function(t,e){},ioFf:function(t,e,n){"use strict";var r=n("dyZX"),i=n("aagx"),o=n("nh4g"),a=n("XKFU"),s=n("KroJ"),c=n("Z6vF").KEY,u=n("eeVq"),l=n("VTer"),f=n("fyDq"),h=n("ylqs"),p=n("K0xU"),v=n("N8g3"),d=n("OnI7"),g=n("1MBn"),y=n("EWmC"),m=n("y3w9"),w=n("0/R4"),x=n("S/j/"),b=n("aCFj"),E=n("apmT"),_=n("RjD/"),S=n("Kuth"),k=n("e7yV"),I=n("EemH"),L=n("JiEa"),F=n("hswa"),O=n("DVgA"),j=I.f,C=F.f,P=k.f,M=r.Symbol,T=r.JSON,A=T&&T.stringify,R=p("_hidden"),D=p("toPrimitive"),N={}.propertyIsEnumerable,U=l("symbol-registry"),K=l("symbols"),X=l("op-symbols"),q=Object.prototype,V="function"==typeof M&&!!L.f,B=r.QObject,Y=!B||!B.prototype||!B.prototype.findChild,W=o&&u((function(){return 7!=S(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=j(q,e);r&&delete q[e],C(t,e,n),r&&t!==q&&C(q,e,r)}:C,H=function(t){var e=K[t]=S(M.prototype);return e._k=t,e},Z=V&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},z=function(t,e,n){return t===q&&z(X,e,n),m(t),e=E(e,!0),m(n),i(K,e)?(n.enumerable?(i(t,R)&&t[R][e]&&(t[R][e]=!1),n=S(n,{enumerable:_(0,!1)})):(i(t,R)||C(t,R,_(1,{})),t[R][e]=!0),W(t,e,n)):C(t,e,n)},J=function(t,e){m(t);for(var n,r=g(e=b(e)),i=0,o=r.length;o>i;)z(t,n=r[i++],e[n]);return t},$=function(t){var e=N.call(this,t=E(t,!0));return!(this===q&&i(K,t)&&!i(X,t))&&(!(e||!i(this,t)||!i(K,t)||i(this,R)&&this[R][t])||e)},G=function(t,e){if(t=b(t),e=E(e,!0),t!==q||!i(K,e)||i(X,e)){var n=j(t,e);return!n||!i(K,e)||i(t,R)&&t[R][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=P(b(t)),r=[],o=0;n.length>o;)i(K,e=n[o++])||e==R||e==c||r.push(e);return r},tt=function(t){for(var e,n=t===q,r=P(n?X:b(t)),o=[],a=0;r.length>a;)!i(K,e=r[a++])||n&&!i(q,e)||o.push(K[e]);return o};V||(s((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===q&&e.call(X,n),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),W(this,t,_(1,n))};return o&&Y&&W(q,t,{configurable:!0,set:e}),H(t)}).prototype,"toString",(function(){return this._k})),I.f=G,F.f=z,n("kJMx").f=k.f=Q,n("UqcF").f=$,L.f=tt,o&&!n("LQAc")&&s(q,"propertyIsEnumerable",$,!0),v.f=function(t){return H(p(t))}),a(a.G+a.W+a.F*!V,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)p(et[nt++]);for(var rt=O(p.store),it=0;rt.length>it;)d(rt[it++]);a(a.S+a.F*!V,"Symbol",{for:function(t){return i(U,t+="")?U[t]:U[t]=M(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!V,"Object",{create:function(t,e){return void 0===e?S(t):J(S(t),e)},defineProperty:z,defineProperties:J,getOwnPropertyDescriptor:G,getOwnPropertyNames:Q,getOwnPropertySymbols:tt});var ot=u((function(){L.f(1)}));a(a.S+a.F*ot,"Object",{getOwnPropertySymbols:function(t){return L.f(x(t))}}),T&&a(a.S+a.F*(!V||u((function(){var t=M();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(w(e)||void 0!==t)&&!Z(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Z(e))return e}),r[1]=e,A.apply(T,r)}}),M.prototype[D]||n("Mukb")(M.prototype,D,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},kJMx:function(t,e,n){var r=n("zhAb"),i=n("4R4u").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},m0Pp:function(t,e,n){var r=n("2OiF");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},ne8i:function(t,e,n){var r=n("RYi7"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},nh4g:function(t,e,n){t.exports=!n("eeVq")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},pIFo:function(t,e,n){"use strict";var r=n("y3w9"),i=n("S/j/"),o=n("ne8i"),a=n("RYi7"),s=n("A5AN"),c=n("Xxuz"),u=Math.max,l=Math.min,f=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n("IU+Z")("replace",2,(function(t,e,n,v){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=v(n,t,this,e);if(i.done)return i.value;var f=r(t),h=String(this),p="function"==typeof e;p||(e=String(e));var g=f.global;if(g){var y=f.unicode;f.lastIndex=0}for(var m=[];;){var w=c(f,h);if(null===w)break;if(m.push(w),!g)break;""===String(w[0])&&(f.lastIndex=s(h,o(f.lastIndex),y))}for(var x,b="",E=0,_=0;_<m.length;_++){w=m[_];for(var S=String(w[0]),k=u(l(a(w.index),h.length),0),I=[],L=1;L<w.length;L++)I.push(void 0===(x=w[L])?x:String(x));var F=w.groups;if(p){var O=[S].concat(I,k,h);void 0!==F&&O.push(F);var j=String(e.apply(void 0,O))}else j=d(S,h,k,I,F,e);k>=E&&(b+=h.slice(E,k)+j,E=k+S.length)}return b+h.slice(E)}];function d(t,e,r,o,a,s){var c=r+t.length,u=o.length,l=p;return void 0!==a&&(a=i(a),l=h),n.call(s,l,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>u){var h=f(l/10);return 0===h?n:h<=u?void 0===o[h-1]?i.charAt(1):o[h-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s}))}}))},quPj:function(t,e,n){var r=n("0/R4"),i=n("LZWt"),o=n("K0xU")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},rE2o:function(t,e,n){n("OnI7")("asyncIterator")},sMXx:function(t,e,n){"use strict";var r=n("Ugos");n("XKFU")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},vhPU:function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},w2a5:function(t,e,n){var r=n("aCFj"),i=n("ne8i"),o=n("d/Gc");t.exports=function(t){return function(e,n,a){var s,c=r(e),u=i(c.length),l=o(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},xpql:function(t,e,n){t.exports=!n("nh4g")&&!n("eeVq")((function(){return 7!=Object.defineProperty(n("Iw71")("div"),"a",{get:function(){return 7}}).a}))},y3w9:function(t,e,n){var r=n("0/R4");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},ylqs:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},zRwo:function(t,e,n){var r=n("6FMO");t.exports=function(t,e){return new(r(t))(e)}},zhAb:function(t,e,n){var r=n("aagx"),i=n("aCFj"),o=n("w2a5")(!1),a=n("YTvA")("IE_PROTO");t.exports=function(t,e){var n,s=i(t),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~o(u,n)||u.push(n));return u}}});
//# sourceMappingURL=walnut.js.map