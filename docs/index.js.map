{"version":3,"file":"index.js","sources":["../src/helper.ts","../src/Walnut.class.js","../src/index.js"],"sourcesContent":["\n/**\n * Looks for the attribute first.\n * If no elements are found then tries with classList\n * \n * @export\n * @param {HTMLElement} el \n * @param {string} cls \n * @returns \n */\nexport function findAncestor (el: HTMLElement, cls: string) {\n\tlet elem = el;\n    while ((elem = elem.parentElement) && !elem.hasAttribute(cls));\n    if (elem instanceof HTMLElement) {\n    \treturn elem;\n    } else {\n    \telem = el;\n    \twhile ((elem = elem.parentElement) && !elem.classList.contains(cls));\n    \tif (elem instanceof HTMLElement) {\n    \t\treturn elem;\n    \t} else {\n\t\t\t\treturn false;\n    \t}\n    }\n}\n\nexport function isFullscreenEnabled() {\n\treturn (<any>document).fullscreenEnabled ||\n\t\t(<any>document).webkitFullscreenEnabled ||\n\t\t(<any>document).mozFullScreenEnabled ||\n\t\t(<any>document).msFullscreenEnabled;\n}\n\nexport let launchIntoFullscreen: any = undefined;\nexport let exitFullscreen: any = undefined;\n\n\n\nexport let fullscreenEnabled = (<any>document).fullscreenEnabled || (<any>document).mozFullScreenEnabled || (<any>document).webkitFullscreenEnabled;\nexport let fullscreenElement = (<any>document).fullscreenElement || (<any>document).mozFullScreenElement || (<any>document).webkitFullscreenElement;\n\n\tlaunchIntoFullscreen = function (element: any) {\n\t  if(element.requestFullscreen) {\n\t    element.requestFullscreen();\n\t  } else if(element.mozRequestFullScreen) {\n\t    element.mozRequestFullScreen();\n\t  } else if(element.webkitRequestFullscreen) {\n\t    element.webkitRequestFullscreen();\n\t  } else if(element.msRequestFullscreen) {\n\t    element.msRequestFullscreen();\n\t  }\n\t};\n\n\texitFullscreen = function () {\n\t  if((<any>document).exitFullscreen) {\n\t    (<any>document).exitFullscreen();\n\t  } else if((<any>document).mozCancelFullScreen) {\n\t    (<any>document).mozCancelFullScreen();\n\t  } else if((<any>document).webkitExitFullscreen) {\n\t    (<any>document).webkitExitFullscreen();\n\t  }\n\t}\n\n\n/**\n * [doDeviceHaveTouch description]\n */\nexport function doDeviceHaveTouch() {\n\tvar bool = false;\n    if (('ontouchstart' in (<any>window)) || (<any>window).DocumentTouch) {\n      bool = true;\n    }\n    return bool;\n}\n\n/**\n * On ResizeEvent function\n */\nexport function resizeEvent(callback: (...args: any[]) => void, action: string = undefined) {\n\tif(action === \"remove\") {\n\t\twindow.removeEventListener('resize', callback, true);\n\t\twindow.removeEventListener(\"orientationchange\", callback);\n\t} else {\n\t\twindow.addEventListener('resize', callback, true);\n\t\twindow.addEventListener(\"orientationchange\", callback);\n\t}\n}\n\nexport function once(fn: any, context: any = undefined) {\n\t// function can only fire once\n\tlet result: any;\n\n\treturn function() {\n\t\tif(fn) {\n\t\t\tresult = fn.apply(context || this, arguments);\n\t\t\tfn = null;\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nexport function getComputedTranslateY(obj: any)\n{\n    if(!window.getComputedStyle) return;\n    var style: any = getComputedStyle(obj),\n        transform = style.transform || style.webkitTransform || style.mozTransform;\n    var mat = transform.match(/^matrix3d\\((.+)\\)$/);\n    if(mat) return parseFloat(mat[1].split(', ')[13]);\n    mat = transform.match(/^matrix\\((.+)\\)$/);\n    return mat ? parseFloat(mat[1].split(', ')[5]) : 0;\n}\n","import {\n\tfullscreenEnabled,\n\tfullscreenElement,\n\tfindAncestor,\n\tisFullscreenEnabled,\n\tdoDeviceHaveTouch,\n\tresizeEvent,\n\tlaunchIntoFullscreen,\n\texitFullscreen,\n\tonce,\n\tgetComputedTranslateY,\n} from './helper';\n\n// TODO: support background images\n/**\n * Create a new instance of Walnut for every different scope of images.\n *\n * @export\n * @class Walnut\n */\nexport default class Walnut {\n    /**\n     * Creates an instance of Walnut.\n     * @param {HTMLElement} images - Either a <img> or an element with background-image\n     * @memberof Walnut\n     */\n    constructor(...images) {\n        this.onDragPreviewList = this.onDragPreviewList.bind(this);\n        this.onDragingPreviewList = this.onDragingPreviewList.bind(this);\n        this.onDragEndPreviewList = this.onDragEndPreviewList.bind(this);\n        this.nextImage = this.nextImage.bind(this);\n        this.prevImage = this.prevImage.bind(this);\n\n\t\tthis.initUI();\n\n\t\tfor (let i = 0; i < images.length; i++) {\n\t\t\tif (Array.isArray(images[i])) {\n\t\t\t\tthis.ui.images = this.ui.images.concat(images[i]);\n\t\t\t} else if (images[i] instanceof HTMLElement) {\n\t\t\t\tthis.ui.images.push(images[i]);\n\t\t\t} else {\n\t\t\t\tthrow 'Invalid element';\n\t\t\t}\n        }\n\n        this.touch = {\n            start: {},\n            startX: 0,\n            startY: 0,\n            end: 0,\n        };\n\n        this.listContainer = {\n            dragstartY: 0,\n            dragendY: 0,\n            lastY: 0,\n            draging: false,\n            translatedY: 0,\n            dragCanceled: false,\n        };\n\n        this.allowedTouchDistance = 100;\n        this.minTouchDistance = 20;\n\n        for (let i = 0; i < this.ui.images.length; i++) {\n            const el = this.ui.images[i];\n            el.classList.add('walnut-image');\n            el.setAttribute('data-walnut-image', i);\n            el.addEventListener('click', (e) => {\n                this.openViewer(e);\n            });\n        }\n\n        this.initEvents();\n\t}\n\n\tinitUI() {\n\t\t// REVIEW: change all classes to IDs ?\n        const wrapper = document.getElementById('walnut-viewer').cloneNode(true);\n\n        document.body.appendChild(wrapper);\n\n\t\tthis.ui = {\n\t\t\timages: [],\n\t\t\twrapper: wrapper,\n\t\t\tlist: wrapper.getElementsByClassName('walnut__list')[0],\n\t\t\tlistContainer: wrapper.getElementsByClassName('walnut__list-container')[0],\n\t\t\tlistHandle: wrapper.getElementsByClassName('walnut__list-handle')[0],\n\t\t\tbox: wrapper.getElementsByClassName('walnut__box')[0],\n\t\t\tmainImageContainer: wrapper.getElementsByClassName('walnut__image-container')[0],\n\t\t\tfullscreenBtn: wrapper.getElementsByClassName('walnut__fullscreen')[0],\n\t\t\tdirectionArrow: wrapper.getElementsByClassName('walnut__direction-arrow')[0],\n\t\t\tdirectionLine: wrapper.getElementsByClassName('walnut__direction-line')[0],\n\t\t\tmainImage: wrapper.getElementsByClassName('walnut__image')[0],\n\t\t\tprevBtn: wrapper.querySelector('.walnut__navigation.walnut__navigation--prev'),\n\t\t\tnextBtn: wrapper.querySelector('.walnut__navigation.walnut__navigation--next'),\n\t\t\tcloseBtn: wrapper.getElementsByClassName('walnut-close')[0],\n\t\t};\n\t}\n\n\tinitEvents() {\n\t\tconst wrapper = this.ui.wrapper;\n\n\t\twrapper.addEventListener('click', (e) => {\n            e.stopPropagation();\n            e.preventDefault();\n\t\t\tconst target = e.target;\n\n\t\t\tif (target.isSameNode(wrapper)) {\n\t\t\t\tthis.clickWrapper(e);\n\t\t\t} else if (target.matches('.walnut__item')) {\n\t\t\t\tlet src = target.getAttribute('data-walnut-source');\n\t\t\t\tthis.changeImage(null, {\n\t\t\t\t\tsource: src,\n\t\t\t\t\ttarget: target,\n\t\t\t\t\tindex: parseInt(target.getAttribute('data-walnut-index')),\n\t\t\t\t\tcontainer: null,\n\t\t\t\t});\n\t\t\t} else if (target.isSameNode(this.ui.closeBtn) || findAncestor(target, 'walnut-close')) {\n\t\t\t\tthis.closeViewer.call(this);\n\t\t\t} else if (target.isSameNode(this.ui.fullscreenBtn)) {\n\t\t\t\tthis.fullscreen.call(this);\n\t\t\t}\n\t\t}, false);\n\n\n\t\tdocument.addEventListener('keyup', this.checkKeyPressed, false);\n\n\t\t// ui.listHandle.addEventListener('drag', onDragingPreviewList);\n\t\t// ui.listHandle.addEventListener('dragstart', onDragPreviewList);\n\t\t// ui.listHandle.addEventListener('dragend', onDragEndPreviewList);\n\n\t\tthis.ui.wrapper.addEventListener('mousemove', this.onDragingPreviewList);\n\t\tthis.ui.wrapper.addEventListener('mousedown', this.onDragPreviewList);\n\t\tthis.ui.wrapper.addEventListener('mouseup', this.onDragEndPreviewList);\n\n\t\tif (doDeviceHaveTouch()) {\n\t\t\tconst mainImage = this.ui.mainImage;\n\t\t\tmainImage.addEventListener('touch.start', this.swipeStart);\n\t\t\tmainImage.addEventListener('touch.end', this.swipeEnd);\n\t\t\tmainImage.addEventListener('touchmove', this.swipeMove);\n\t\t} else {\n\t\t\tthis.ui.nextBtn.addEventListener('click', this.nextImage);\n\t\t\tthis.ui.prevBtn.addEventListener('click', this.prevImage);\n\t\t}\n\t}\n\n\tinitFlexEvents() {\n\t\tdocument.addEventListener('keyup', this.checkKeyPressed);\n\t\twindow.addEventListener('popstate', this.changeHistory);\n\t\tresizeEvent(this.fixViewer);\n\t}\n\tdeinitFlexEvents() {\n\t\tdocument.removeEventListener('keyup', this.checkKeyPressed);\n\t\twindow.removeEventListener('popstate', this.changeHistory);\n\t\tresizeEvent(this.fixViewer, 'remove');\n\t}\n\n\n\tinitOverviewList() {\n\t\tconst list = this.ui.list;\n\t\tconst images = this.ui.images;\n\n\t\tlist.innerHTML = '';\n\n\t\tif (images.length > 1) {\n\t\t\tfor (let i = 0; i < images.length; i++) {\n\t\t\t\tconst li = document.createElement('li');\n\t\t\t\tli.className = 'walnut__item';\n\t\t\t\tli.style.backgroundImage = `url(${images[i].src})`;\n\t\t\t\tli.setAttribute('data-walnut-source', images[i].src);\n\t\t\t\t// li.setAttribute(\"data-walnut-index\", images[i].index);\n\n\t\t\t\tlist.appendChild(li);\n\t\t\t};\n\t\t}\n\t}\n\n\tfixListWidth() {\n\t\tlet elItem = document.getElementsByClassName('walnut__item')[0];\n\t\tlet listItem = elItem.offsetWidth;\n\t\tlet elList = document.getElementsByClassName('walnut__list')[0];\n\t\telList.style.width = (this.ui.images.length * listItem) + 'px';\n\t}\n\n\topenViewer(e) {\n\t\tconst target = e.target;\n\t\tif (typeof target == 'undefined') return;\n\n\t\tlet index = target.getAttribute('data-walnut-image');\n\t\tlet container;\n\t\tlet listItem;\n\t\tlet mainImage = this.ui.mainImage;\n\t\tlet prevBtn = this.ui.prevBtn;\n\t\tlet nextBtn = this.ui.nextBtn;\n\t\tlet src;\n\n\t\tconst style = window.getComputedStyle(target, null);\n\n\t\t/**\n\t\t * Looks for the image source and if not found get the background image\n\t\t */\n\t\tif (target.src) {\n\t\t\tsrc = target.src;\n\t\t} else if (style.backgroundImage != 'none') {\n\t\t\tsrc = style.backgroundImage.slice(4, -1).replace(/\"/g, '');\n\t\t} else {\n\t\t\tthrow new Error('Couldn\\'t find a image for element: ' + target);\n\t\t}\n\n\t\tmainImage.src = src;\n\t\tmainImage.setAttribute('data-walnut-index', index);\n\n\n\t\tdocument.body.classList.add('walnut--open');\n\n\t\t// let length = containerArray[containerIndex].images.length;\n\n\t\t// if (index === 0 && index === length - 1) {\n\t\t// \tprevBtn.style.display = \"none\";\n\t\t// \tnextBtn.style.display = \"none\";\n\t\t// } else if (index === 0) {\n\t\t// \tprevBtn.style.display = \"none\";\n\t\t// \tnextBtn.style.display = \"\";\n\t\t// } else if (index === (length - 1)) {\n\t\t// \tnextBtn.style.display = \"none\";\n\t\t// \tprevBtn.style.display = \"\";\n\t\t// } else {\n\t\t// \tprevBtn.style.display = \"\";\n\t\t// \tnextBtn.style.display = \"\";\n\t\t// }\n\n\t\tthis.initFlexEvents();\n\t\tthis.fixViewer();\n\n\t\tthis.ui.wrapper.classList.add('walnut__wrapper--open');\n\n\t\tlet stateObj = 'walnut';\n\t\thistory.pushState(stateObj, 'walnut', '');\n\t}\n\n\tcloseViewer() {\n\t\tthis.ui.mainImage.src = '';\n\t\tthis.ui.wrapper.classList.remove('walnut__wrapper--open');\n\t\tdocument.body.classList.remove('walnut--open');\n\t\tthis.deinitFlexEvents();\n\t\tthis.fullscreen('exit');\n\t\tif (history.state === 'walnut') {\n\t\t\twindow.history.back();\n\t\t}\n\t}\n\n\n\tchangeImage(action = undefined, object = undefined) {\n\t\tlet newIndex = 0;\n\t\tlet index = 0;\n\t\tconst prevBtn = this.ui.prevBtn;\n\t\tconst nextBtn = this.ui.nextBtn;\n\t\tconst mainImage = this.ui.mainImage;\n\t\tconst images = this.ui.images;\n\n\t\tif (typeof action !== 'undefined' && action !== null) {\n\t\t\tindex = parseInt(mainImage.getAttribute('data-walnut-index'));\n\n\t\t\tif (action === 'next' && index < images.length - 1) {\n\t\t\t\tindex = index + 1;\n\t\t\t} else if (action === 'prev' && index > 0) {\n\t\t\t\tindex = index - 1;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// TODO: find right array istead of 0\n\t\t\tif (images[index]) {\n                let src = '';\n                if (images[index].src) {\n                    src = images[index].src;\n                } else if (images[index].style.backgroundImage != 'none') {\n                    src = images[index].style.backgroundImage.slice(4, -1).replace(/\"/g, '');\n                }\n\t\t\t\tmainImage.src = src;\n\t\t\t\tmainImage.setAttribute('data-walnut-index', index.toString());\n\t\t\t}\n\t\t} else if (object && object.source) {\n\t\t\tindex = parseInt(object.index);\n\t\t\tmainImage.src = object.source;\n\t\t\tmainImage.setAttribute('data-walnut-index', index.toString());\n\t\t}\n\n\t\tif (index === 0 && index === images.length - 1) {\n\t\t\tprevBtn.style.display = 'none';\n\t\t\tnextBtn.style.display = 'none';\n\t\t} else if (index === 0) {\n\t\t\tprevBtn.style.display = 'none';\n\t\t\tnextBtn.style.display = '';\n\t\t} else if (index === (images.length - 1)) {\n\t\t\tnextBtn.style.display = 'none';\n\t\t\tprevBtn.style.display = '';\n\t\t} else {\n\t\t\tprevBtn.style.display = '';\n\t\t\tnextBtn.style.display = '';\n\t\t}\n\n\t\tthis.checkHeight();\n\t}\n\n\tfixViewer() {\n\t\tthis.checkHeight();\n\t\tif (document.getElementsByClassName('.walnut__item')[0] instanceof HTMLElement) {\n\t\t\tthis.fixListWidth();\n\t\t}\n\t}\n\n\tcheckHeight() {\n\t\tlet viewerHeight = this.ui.box.offsetHeight;\n\t\tlet wrapper = this.ui.wrapper;\n\n\t\tif (viewerHeight > window.innerHeight) {\n\t\t\twrapper.classList.add('walnut--align-top');\n\t\t} else {\n\t\t\twrapper.classList.remove('walnut--align-top');\n\t\t}\n\t}\n\n\tcheckKeyPressed(e) {\n\t\tlet key = e.keyCode;\n\t\tif (key === 37) {\n\t\t\tthis.changeImage('prev');\n\t\t} else if (key === 39) {\n\t\t\tthis.changeImage('next');\n\t\t} else if (key === 27) {\n\t\t\tthis.closeViewer();\n\t\t}\n\t}\n\n\tclickWrapper(e) {\n\t\te.stopPropagation(); // FIXME: stop event from bubbling\n\t\te.preventDefault(); // FIXME: stop event from bubbling\n\n\t\tthis.closeViewer(this);\n\t}\n\n\tfullscreen(option = '') {\n\t\tlet wrapper = this.ui.wrapper;\n\t\tlet fullscreenBtn = this.ui.fullscreenBtn;\n\n\t\tif (option === 'exit') {\n\t\t\texitFullscreen();\n\t\t\tfullscreenBtn.classList.remove('walnut__fullscreen--hidden');\n\t\t} else {\n\t\t\tlaunchIntoFullscreen(wrapper);\n\t\t\tfullscreenBtn.classList.add('walnut__fullscreen--hidden');\n\t\t}\n\t}\n\n\tnextImage() {\n\t\tthis.changeImage('next');\n\t}\n\n\tprevImage() {\n\t\tthis.changeImage('prev');\n\t}\n\n\tonDragPreviewList(e) {\n\t\tconst target = e.target;\n\t\tthis.clickTarget = target;\n\t\tif (target.matches('.walnut__list-handle')) {\n\t\t\te.preventDefault();\n\t\t\tconsole.log('dragStart', e);\n\t\t\tthis.listContainer.dragstartY = e.clientY;\n\t\t\tthis.listContainer.draging = true;\n\t\t}\n\t}\n\n\tonDragingPreviewList(e) {\n\t\te.preventDefault();\n\t\tlet y = parseFloat(e.clientY);\n\t\tif (this.listContainer.draging && !this.listContainer.dragCanceled && (y > (this.listContainer.dragstartY + 1) ||\n\t\t\ty < (this.listContainer.dragstartY - 1))) {\n\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\tlet startY = this.listContainer.dragstartY;\n\t\t\t\tlet translated = this.listContainer.translatedY;\n\t\t\t\tlet newY = translated + (y - startY);\n\t\t\t\tif (newY < 0) {\n\t\t\t\t\tthis.listContainer.dragCanceled = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tnewY = Math.min(100, newY); // TODO: change 100 to list height\n\t\t\t\tconsole.log('drag', newY);\n\t\t\t\tthis.ui.listContainer.style.transform = `translate3d(0, ${newY}px, 0)`;\n\t\t\t});\n\t\t}\n\t}\n\n\tonDragEndPreviewList(e) {\n\t\tif (this.listContainer.draging) {\n\t\t\t// e.preventDefault();\n\t\t\t// e.stopPropagation();\n\t\t\t// let newY = (listContainer.translatedY + (e.clientY - listContainer.dragstartY));\n\t\t\t// newY = Math.max(0, newY);\n\t\t\t// newY = Math.min(100, newY);\n\t\t\t// listContainer.translatedY = newY;\n\t\t\t// listContainer.draging = false;\n\t\t\t// listContainer.dragCanceled = false;\n\t\t\t// console.log('dragEnd', listContainer.translatedY);\n\t\t}\n\t}\n\n\tswipeStart(e) {\n\t\tlet touchobj = e.changedTouches[0];\n\n\t\tthis.touch.startX = parseInt(touchobj.clientX);\n\t\tthis.touch.startY = parseInt(touchobj.clientY);\n\t\te.preventDefault();\n\t}\n\n\tswipeMove(e) {\n\t\tlet touchobj = e.changedTouches[0];\n\t\tlet touchMoveX = parseInt(touchobj.clientX);\n\t\tlet touchMoveY = parseInt(touchobj.clientY);\n\t\tlet index = parseInt(this.ui.mainImage.getAttribute('data-walnut-index'));\n\t\tlet directionLine = this.ui.directionLine;\n\t\tlet directionArrow = this.ui.directionArrow;\n\t\tlet distX;\n\t\tlet distY;\n\n\t\tdistX = Math.abs(touchMoveX - this.touch.startX);\n\t\tdistY = Math.abs(touchMoveY - this.touch.startY);\n\n\t\tdirectionLine.style.width = 40 + distX + 'px';\n\n\t\t// Checks if you swipe right or left or if you swiped up or down more than allowed and checks if there is more pictures that way\n\t\tif (this.touch.startX > touchMoveX && distY < this.allowedTouchDistance && index < this.ui.images.length - 1) {\n\t\t\tdirectionLine.classList.remove('walnut__direction-line--active-left');\n\t\t\tdirectionLine.classList.add('walnut__direction-line--active walnut__direction-line--active-right');\n\t\t\tdirectionArrow.innerHTML = ''; // TODO: instead of removing just hide\n\t\t} else if (this.touch.startX > touchMoveX && distY < this.allowedTouchDistance) {\n\t\t\t// stop\n\t\t\tdirectionLine.classList.remove('walnut__direction-line--active-left');\n\t\t\tdirectionLine.classList.add('walnut__direction-line--active walnut__direction-line--active-right');\n\t\t\tdirectionArrow.innerHTML = '';\n\t\t} else if (this.touch.startX < touchMoveX && distY < this.allowedTouchDistance && index > 0) {\n\t\t\tdirectionLine.classList.remove('walnut__direction-line--active-right');\n\t\t\tdirectionLine.classList.add('walnut__direction-line--active walnut__direction-line--active-left');\n\t\t\tdirectionArrow.innerHTML = '';\n\t\t} else if (this.touch.startX < touchMoveX && distY < this.allowedTouchDistance) {\n\t\t\tdirectionLine.classList.remove('walnut__direction-line--active-right');\n\t\t\tdirectionLine.classList.add('walnut__direction-line--active walnut__direction-line--active-left');\n\t\t\tdirectionArrow.innerHTML = '';\n\t\t} else {\n\t\t\tdirectionLine.classList.remove('walnut__direction-line--active walnut__direction-line--active-left walnut__direction-line--active-right');\n\t\t}\n\t\te.preventDefault();\n\t}\n\n\tswipeEnd(e) {\n\t\tlet touchobj = e.changedTouches[0];\n\t\tlet touchMoveX = parseInt(touchobj.clientX);\n\t\tlet touchMoveY = parseInt(touchobj.clientY);\n\t\tlet distY = Math.abs(touchMoveY - this.touch.startY);\n\t\tlet distX = Math.abs(touchMoveX - this.touch.startX);\n\t\tlet directionLine = this.ui.directionLine;\n\n\t\tthis.touch.end = touchMoveX;\n\n\t\te.preventDefault();\n\n\t\tdirectionLine.classList.remove('walnut__direction-line--active');\n\t\tdirectionLine.classList.remove('walnut__direction-line--active-left');\n\t\tdirectionLine.classList.remove('walnut__direction-line--active-right');\n\n\t\tif (this.touch.startX > this.touch.end &&\n\t\t\tdistX > this.minTouchDistance &&\n\t\t\tdistY < this.allowedTouchDistance) {\n\t\t\tthis.nextImage();\n\t\t} else if (this.touch.startX < this.touch.end &&\n\t\t\tdistX > this.minTouchDistance &&\n\t\t\tdistY < this.allowedTouchDistance) {\n\t\t\t\tthis.prevImage();\n\t\t} else if (distY > 200) {\n\t\t\tthis.closeViewer();\n\t\t}\n\t}\n\n\tchangeHistory(event) {\n\t\tthis.closeViewer();\n\t}\n}\n","import Walnut from './Walnut.class.js';\nimport './index.scss';\nimport './walnut.scss';\n\ndocument.querySelectorAll('[walnut]').forEach((el) => {\n    new Walnut([...el.getElementsByTagName('img')], [...el.querySelectorAll('.image')]);\n});\n\n"],"names":[],"mappings":"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"}