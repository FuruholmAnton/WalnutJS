"use strict";!function(){function e(e,t){for(var n=e;(n=n.parentElement)&&!n.hasAttribute(t););if(n instanceof HTMLElement)return n;for(n=e;(n=n.parentElement)&&!n.classList.contains(t););if(n instanceof HTMLElement)return n;throw new Error("Couldn't find any container with attribute or class 'walnut' of this element")}function t(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}function n(){return!!("ontouchstart"in window||window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture||window.DocumentTouch&&document instanceof DocumentTouch||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)}function i(e,t){"remove"===t?(window.removeEventListener("resize",e,!0),window.removeEventListener("orientationchange",e)):(window.addEventListener("resize",e,!0),window.addEventListener("orientationchange",e))}var r,a;if(t()){document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;r=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},a=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}}window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame}(),!window.addEventListener&&function(e,t,n,i,r,a,l){e[i]=t[i]=n[i]=function(e,t){var n=this;l.unshift([n,e,t,function(e){e.currentTarget=n,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||n,t.call(n,e)}]),this.attachEvent("on"+e,l[0][3])},e[r]=t[r]=n[r]=function(e,t){for(var n,i=0;n=l[i];++i)if(n[0]==this&&n[1]==e&&n[2]==t)return this.detachEvent("on"+e,l.splice(i,1)[0][3])},e[a]=t[a]=n[a]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);var l='<svg class="walnut__close" viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.4">						<path fill="#fff" d="M21.6 61.6l38.8-39L775 737.3l-39 39z"/>						<path fill="#fff" d="M21.6 61.6l38.8-39L775 737.3l-39 39z"/>						<path fill="#fff" d="M2.8 80.4L80.3 3l714.4 714.3-77.5 77.5z"/>						<path fill="#fff" d="M797.7 82.5L717.2 2 2.8 716.4 83.2 797z"/>					</svg>',c=new DOMParser,s=c.parseFromString(l,"image/svg+xml");s=s.documentElement;var o={init:function(){var e,t,i,r;this.CONTAINERS=o.getContainers(),this.containerArray=[],this.viewer={},this.config={},this.touchStart=0,this.touchEnd=0,this.allowedTouchDistance=100,this.minTouchDistance=20,e=o.getScriptSrc(),e=e.replace("walnut.js",""),t=e.split("/"),i="";for(var r=3;r<t.length;r++)3!==r&&(i+="/"),i+=t[r];o.config.path=i,this.indexImages(),this.buildViewer(),this.addCSSLink(),n()&&o.viewer.wrapper.classList.add("walnut--is-touch")},getContainers:function(){var e=document.querySelectorAll("[walnut]");if(e.length>0)return e;if(e=document.querySelectorAll(".walnut"),e.length>0)return e;throw new Error("Couldn't find any containers for walnut.")},getScriptSrc:function(){var e=document.querySelector("[walnut-script]");if(e instanceof HTMLElement)return e.src;if(e=document.getElementById("scriptTag"),e instanceof HTMLElement)return e.src;throw new Error("Couldn't find the script-tag for walnut with attribute walnut-script or id='walnutScript'")},initEvents:function(){o.viewer.wrapper.addEventListener("click",o.clickWrapper),o.viewer.closeBtn.addEventListener("click",o.closeViewer),o.viewer.fullscreenBtn.addEventListener("click",o.fullscreen),document.addEventListener("keyup",o.checkKeyPressed),i(o.fixViewer),n()?(o.viewer.mainImage.addEventListener("touchstart",o.swipeStart),o.viewer.mainImage.addEventListener("touchend",o.swipeEnd),o.viewer.mainImage.addEventListener("touchmove",o.swipeMove)):(o.viewer.nextBtn.addEventListener("click",o.nextImage),o.viewer.prevBtn.addEventListener("click",o.prevImage))},deinitEvents:function(){o.viewer.wrapper.removeEventListener("click",o.clickWrapper),o.viewer.closeBtn.removeEventListener("click",o.closeViewer),o.viewer.fullscreenBtn.removeEventListener("click",o.fullscreen),document.removeEventListener("keyup",o.checkKeyPressed),i(o.fixViewer,"remove"),n()?(o.viewer.mainImage.removeEventListener("touchstart",o.swipeStart),o.viewer.mainImage.removeEventListener("touchend",o.swipeEnd),o.viewer.mainImage.removeEventListener("touchmove",o.swipeMove)):(o.viewer.nextBtn.removeEventListener("click",o.nextImage),o.viewer.prevBtn.removeEventListener("click",o.prevImage))},addCSSLink:function(){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",o.config.path+"styles/walnut.css"),document.getElementsByTagName("head")[0].appendChild(e)},indexImages:function(){for(var e=0;e<this.CONTAINERS.length;e++){this.containerArray.push({container:this.CONTAINERS[e],images:[]}),this.CONTAINERS[e].setAttribute("data-walnut-container",e);var t=this.CONTAINERS[e].getElementsByTagName("img"),n=this.CONTAINERS[e].getElementsByClassName("walnut-image"),i=this.CONTAINERS[e].querySelectorAll("[walnut-image]"),r=[];if(n)for(var a=0;a<n.length;a++)r.push(n[a]);if(i)for(var a=0;a<i.length;a++)r.push(i[a]);if(t)for(var a=0;a<t.length;a++)r.push(t[a]);for(var l=0;l<r.length;l++){r[l].addEventListener("click",o.openViewer),r[l].setAttribute("data-walnut-index",l);var c;if(r[l].src)c=r[l].src;else{var s=r[l].currentStyle||window.getComputedStyle(r[l],!1);c=s.backgroundImage.slice(4,-1).replace(/"/g,"")}this.containerArray[e].images.push({elem:r[l],src:c,index:l})}}},buildViewer:function(){var e=document.createElement("ul"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),a=document.createElement("img"),l=document.createElement("div"),c=document.createElement("div"),d=document.createElement("img"),u=document.createElement("div"),w=document.createElement("img"),v=(document.createElement("img"),document.getElementsByTagName("body")[0]),m=document.createElement("img"),h=document.createElement("div");if(e.className="walnut__list",n.className="walnut__list-container",a.className="walnut__image",l.className="walnut__image-container",r.className="walnut__box",i.className="walnut__wrapper",c.className="walnut__navigation walnut__navigation--next",d.src=o.config.path+"images/button_to_right.svg",d.className="walnut__navigation-img",u.className="walnut__navigation walnut__navigation--prev",w.src=o.config.path+"images/button_to_left.svg",w.className="walnut__navigation-img",m.className="walnut__direction-arrow",h.className="walnut__direction-line",c.appendChild(d),u.appendChild(w),h.appendChild(m),l.appendChild(a),l.appendChild(c),l.appendChild(u),l.appendChild(h),n.appendChild(e),r.appendChild(l),r.appendChild(n),i.appendChild(s),i.appendChild(r),v.appendChild(i),t()){var p=document.createElement("img");p.className="walnut__fullscreen",p.src=o.config.path+"images/button_fullscreen.svg",i.appendChild(p)}o.body=v,o.viewer.closeBtn=s,o.viewer.nextBtn=c,o.viewer.prevBtn=u,o.viewer.fullscreenBtn=p,o.viewer.mainImage=a,o.viewer.wrapper=i,o.viewer.list=e,o.viewer.directionArrow=m,o.viewer.directionLine=h,o.viewer.box=r},openViewer:function(t){var n,i;i=e(t.target,"walnut"),o.containerIndex=i.getAttribute("data-walnut-container"),o.setImages(),n=this.getAttribute("data-walnut-index"),n=parseInt(n);var r;if(this.src)r=this.src;else{var a=this.currentStyle||window.getComputedStyle(this,!1);r=a.backgroundImage.slice(4,-1).replace(/"/g,"")}o.viewer.mainImage.src=r,o.viewer.mainImage.setAttribute("data-walnut-index",n),o.body.classList.add("walnut--open"),0===n&&n===o.containerArray[o.containerIndex].images.length-1?(o.viewer.prevBtn.style.display="none",o.viewer.nextBtn.style.display="none"):0===n?(o.viewer.prevBtn.style.display="none",o.viewer.nextBtn.style.display=""):n===o.containerArray[o.containerIndex].images.length-1?(o.viewer.nextBtn.style.display="none",o.viewer.prevBtn.style.display=""):(o.viewer.prevBtn.style.display="",o.viewer.nextBtn.style.display=""),o.initEvents(),o.checkHeight(),o.fixList(),o.viewer.wrapper.classList.add("walnut__wrapper--open")},setImages:function(e){var t;if(o.viewer.list.innerHTML="",this.containerArray[o.containerIndex].images.length>1)for(var n=0;n<this.containerArray[o.containerIndex].images.length;n++)t=document.createElement("li"),t.className="walnut__item",t.style.backgroundImage="url("+o.containerArray[o.containerIndex].images[n].src+")",t.setAttribute("data-walnut-source",o.containerArray[o.containerIndex].images[n].src),t.setAttribute("data-walnut-index",o.containerArray[o.containerIndex].images[n].index),t.addEventListener("click",function(){var e=this.getAttribute("data-walnut-source");o.changeImage(null,{source:e,index:this.getAttribute("data-walnut-index"),container:null})}),o.viewer.list.appendChild(t)},fixList:function(){var e=document.querySelector(".walnut__item").offsetWidth;document.querySelector(".walnut__list").style.width=o.containerArray[o.containerIndex].images.length*e+"px"},closeViewer:function(){o.viewer.mainImage.src="",o.viewer.wrapper.classList.remove("walnut__wrapper--open"),o.body.classList.remove("walnut--open"),o.deinitEvents(),o.fullscreen("exit")},changeImage:function(e,t){var n=0;if("undefined"!=typeof e&&null!==e){if(n=o.viewer.mainImage.getAttribute("data-walnut-index"),n=parseInt(n),"next"===e&&n<o.containerArray[o.containerIndex].images.length-1)n+=1;else{if(!("prev"===e&&n>0))return;n-=1}o.containerArray[o.containerIndex].images[n]&&(o.viewer.mainImage.src=o.containerArray[o.containerIndex].images[n].src,o.viewer.mainImage.setAttribute("data-walnut-index",n))}else"undefined"!=typeof t&&(n=parseInt(t.index),o.viewer.mainImage.src=t.source,o.viewer.mainImage.setAttribute("data-walnut-index",n));0===n&&n===o.containerArray[o.containerIndex].images.length-1?(o.viewer.prevBtn.style.display="none",o.viewer.nextBtn.style.display="none"):0===n?(o.viewer.prevBtn.style.display="none",o.viewer.nextBtn.style.display=""):n===o.containerArray[o.containerIndex].images.length-1?(o.viewer.nextBtn.style.display="none",o.viewer.prevBtn.style.display=""):(o.viewer.prevBtn.style.display="",o.viewer.nextBtn.style.display=""),o.checkHeight()},fixViewer:function(){o.checkHeight(),o.fixList()},checkHeight:function(){var e=o.viewer.box.offsetHeight;e>window.innerHeight?o.viewer.wrapper.classList.add("walnut--align-top"):o.viewer.wrapper.classList.remove("walnut--align-top")},checkKeyPressed:function(e){var t=e.keyCode;37===t?o.changeImage("prev"):39===t?o.changeImage("next"):27===t&&o.closeViewer()},clickWrapper:function(e){e.stopPropagation(),e.preventDefault(),e.target===this&&o.closeViewer.call(this)},fullscreen:function(e){var t=document.querySelector(".walnut__wrapper");"exit"===e?(a(),t.querySelector(".walnut__fullscreen").classList.remove("walnut__fullscreen--hidden")):(r(t),t.querySelector(".walnut__fullscreen").classList.add("walnut__fullscreen--hidden"))},nextImage:function(){o.changeImage.call(this,"next")},prevImage:function(){o.changeImage.call(this,"prev")},swipeStart:function(e){var t=e.changedTouches[0];o.touchStartX=parseInt(t.clientX),o.touchStartY=parseInt(t.clientY),e.preventDefault()},swipeMove:function(e){var t,n,i=e.changedTouches[0],r=parseInt(i.clientX),a=parseInt(i.clientY),l=o.viewer.mainImage.getAttribute("data-walnut-index");t=Math.abs(r-o.touchStartX),n=Math.abs(a-o.touchStartY),o.viewer.directionLine.style.width=40+t+"px",o.touchStartX>r&&n<o.allowedTouchDistance&&l<o.containerArray[o.containerIndex].images.length-1?(o.viewer.directionLine.classList.remove("walnut__direction-line--active-left"),o.viewer.directionLine.classList.add("walnut__direction-line--active"),o.viewer.directionLine.classList.add("walnut__direction-line--active-right"),o.viewer.directionArrow.src=o.config.path+"images/button_to_right.svg"):o.touchStartX>r&&n<o.allowedTouchDistance?(o.viewer.directionLine.classList.remove("walnut__direction-line--active-left"),o.viewer.directionLine.classList.add("walnut__direction-line--active"),o.viewer.directionLine.classList.add("walnut__direction-line--active-right"),o.viewer.directionArrow.src=o.config.path+"images/button_close_filled.svg"):o.touchStartX<r&&n<o.allowedTouchDistance&&l>0?(o.viewer.directionLine.classList.remove("walnut__direction-line--active-right"),o.viewer.directionLine.classList.add("walnut__direction-line--active"),o.viewer.directionLine.classList.add("walnut__direction-line--active-left"),o.viewer.directionArrow.src=o.config.path+"images/button_to_left.svg"):o.touchStartX<r&&n<o.allowedTouchDistance?(o.viewer.directionLine.classList.remove("walnut__direction-line--active-right"),o.viewer.directionLine.classList.add("walnut__direction-line--active"),o.viewer.directionLine.classList.add("walnut__direction-line--active-left"),o.viewer.directionArrow.src=o.config.path+"images/button_close_filled.svg"):(o.viewer.directionLine.classList.remove("walnut__direction-line--active"),o.viewer.directionLine.classList.remove("walnut__direction-line--active-left"),o.viewer.directionLine.classList.remove("walnut__direction-line--active-right")),e.preventDefault()},swipeEnd:function(e){var t=e.changedTouches[0],n=parseInt(t.clientX),i=parseInt(t.clientY),r=Math.abs(i-o.touchStartY),a=Math.abs(n-o.touchStartX);o.touchEnd=n,e.preventDefault(),o.viewer.directionLine.classList.remove("walnut__direction-line--active"),o.viewer.directionLine.classList.remove("walnut__direction-line--active-left"),o.viewer.directionLine.classList.remove("walnut__direction-line--active-right"),o.touchStartX>o.touchEnd&&a>o.minTouchDistance&&r<o.allowedTouchDistance?o.nextImage():o.touchStartX<o.touchEnd&&a>o.minTouchDistance&&r<o.allowedTouchDistance&&o.prevImage()}};o.init()}();var closeBtn='<svg class="walnut__close" viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.4"><path fill="#fff" d="M21.6 61.6l38.8-39L775 737.3l-39 39z"/><path fill="#fff" d="M21.6 61.6l38.8-39L775 737.3l-39 39z"/><path fill="#fff" d="M2.8 80.4L80.3 3l714.4 714.3-77.5 77.5z"/><path fill="#fff" d="M797.7 82.5L717.2 2 2.8 716.4 83.2 797z"/></svg>';