"use strict";!function(){function e(e,t){for(var n=e;(n=n.parentElement)&&!n.hasAttribute(t););if(n instanceof HTMLElement)return n;for(n=e;(n=n.parentElement)&&!n.classList.contains(t););if(n instanceof HTMLElement)return n;throw new Error("Couldn't find any container with attribute or class 'walnut' of this element")}function t(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}function n(){return!!("ontouchstart"in window||window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture||window.DocumentTouch&&document instanceof DocumentTouch||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)}function i(e,t){"remove"===t?(window.removeEventListener("resize",e,!0),window.removeEventListener("orientationchange",e)):(window.addEventListener("resize",e,!0),window.addEventListener("orientationchange",e))}var r,a;if(t()){document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;r=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},a=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}}window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame}(),!window.addEventListener&&function(e,t,n,i,r,a,l){e[i]=t[i]=n[i]=function(e,t){var n=this;l.unshift([n,e,t,function(e){e.currentTarget=n,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||n,t.call(n,e)}]),this.attachEvent("on"+e,l[0][3])},e[r]=t[r]=n[r]=function(e,t){for(var n,i=0;n=l[i];++i)if(n[0]==this&&n[1]==e&&n[2]==t)return this.detachEvent("on"+e,l.splice(i,1)[0][3])},e[a]=t[a]=n[a]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);var l='<svg class="walnut__close" viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.4"><path fill="#fff" d="M21.6 61.6l38.8-39L775 737.3l-39 39z"/><path fill="#fff" d="M21.6 61.6l38.8-39L775 737.3l-39 39z"/><path fill="#fff" d="M2.8 80.4L80.3 3l714.4 714.3-77.5 77.5z"/><path fill="#fff" d="M797.7 82.5L717.2 2 2.8 716.4 83.2 797z"/></svg>',c='<svg viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.4"><path d="M400 7.2c219.4 0 397.6 176.3 397.6 393.5S619.4 794.3 400 794.3C180.6 794.3 2.4 618 2.4 400.7 2.4 183.5 180.6 7.2 400 7.2zm-48.2 389L153.2 595l50.2 50.2L402 446.5 599.4 644l48.4-48.5L450.5 398l199.2-199-50.2-50.4L400.2 348 201.5 149 153 197.6 352 396.3z" fill="#fff"/></svg>',s='<svg class="walnut__fullscreen" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.4"><path d="M3.4 15.4H0V24h8.6v-3.4H3.4v-5.2zM0 8.6h3.4V3.4h5.2V0H0v8.6zm20.6 12h-5.2V24H24v-8.6h-3.4v5.2zM15.4 0v3.4h5.2v5.2H24V0h-8.6z" fill="#fff" fill-rule="nonzero"/></svg>',o='<svg class="walnut__navigation-img" viewBox="0 0 45 45" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.41"><g fill="#fff" fill-rule="nonzero"><path d="M22.12 44.24c12.2 0 22.12-9.93 22.12-22.12C44.24 9.92 34.3 0 22.12 0 9.92 0 0 9.92 0 22.12c0 12.2 9.92 22.12 22.12 22.12zm0-42.74c11.37 0 20.62 9.25 20.62 20.62 0 11.37-9.25 20.62-20.62 20.62-11.37 0-20.62-9.25-20.62-20.62C1.5 10.75 10.75 1.5 22.12 1.5z"/><path d="M24.9 29.88c.2 0 .38-.07.52-.22.3-.3.3-.76 0-1.06l-6.8-6.8 6.8-6.8c.3-.3.3-.77 0-1.06-.3-.3-.76-.3-1.06 0l-7.32 7.33c-.3.3-.3.77 0 1.06l7.32 7.33c.15.15.34.22.53.22z"/></g></svg>',d='<svg class="walnut__navigation-img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44.236 44.236"><g fill="#FFF"><path d="M22.12 44.24C9.92 44.24 0 34.3 0 22.12S9.92 0 22.12 0s22.12 9.92 22.12 22.12-9.93 22.12-22.12 22.12zm0-42.74C10.75 1.5 1.5 10.75 1.5 22.12c0 11.37 9.25 20.62 20.62 20.62 11.37 0 20.62-9.25 20.62-20.62 0-11.37-9.25-20.62-20.62-20.62z"/><path d="M19.34 29.88c-.2 0-.38-.07-.53-.22-.28-.3-.28-.76 0-1.06l6.8-6.8-6.8-6.8c-.28-.3-.28-.77 0-1.07.3-.3.78-.3 1.07 0l7.33 7.34c.3.3.3.77 0 1.06l-7.33 7.33c-.14.15-.34.22-.53.22z"/></g></svg>',u=new DOMParser,v=u.parseFromString(l,"image/svg+xml").documentElement,w=(u.parseFromString(c,"image/svg+xml").documentElement,u.parseFromString(s,"image/svg+xml").documentElement),m=u.parseFromString(o,"image/svg+xml").documentElement,g=u.parseFromString(d,"image/svg+xml").documentElement,h={init:function(){var e,t,i,r;this.CONTAINERS=h.getContainers(),this.containerArray=[],this.viewer={},this.config={},this.touchStart=0,this.touchEnd=0,this.allowedTouchDistance=100,this.minTouchDistance=20,e=h.getScriptSrc(),e=e.replace("walnut.js",""),t=e.split("/"),i="";for(var r=3;r<t.length;r++)3!==r&&(i+="/"),i+=t[r];h.config.path=i,this.indexImages(),this.buildViewer(),this.addCSSLink(),n()&&h.viewer.wrapper.classList.add("walnut--is-touch")},getContainers:function(){var e=document.querySelectorAll("[walnut]");if(e.length>0)return e;if(e=document.querySelectorAll(".walnut"),e.length>0)return e;throw new Error("Couldn't find any containers for walnut.")},getScriptSrc:function(){var e=document.querySelector("[walnut-script]");if(e instanceof HTMLElement)return e.src;if(e=document.getElementById("scriptTag"),e instanceof HTMLElement)return e.src;throw new Error("Couldn't find the script-tag for walnut with attribute walnut-script or id='walnutScript'")},initEvents:function(){h.viewer.wrapper.addEventListener("click",h.clickWrapper),h.viewer.closeBtn.addEventListener("click",h.closeViewer),h.viewer.fullscreenBtn.addEventListener("click",h.fullscreen),document.addEventListener("keyup",h.checkKeyPressed),i(h.fixViewer),n()?(h.viewer.mainImage.addEventListener("touchstart",h.swipeStart),h.viewer.mainImage.addEventListener("touchend",h.swipeEnd),h.viewer.mainImage.addEventListener("touchmove",h.swipeMove)):(h.viewer.nextBtn.addEventListener("click",h.nextImage),h.viewer.prevBtn.addEventListener("click",h.prevImage))},deinitEvents:function(){h.viewer.wrapper.removeEventListener("click",h.clickWrapper),h.viewer.closeBtn.removeEventListener("click",h.closeViewer),h.viewer.fullscreenBtn.removeEventListener("click",h.fullscreen),document.removeEventListener("keyup",h.checkKeyPressed),i(h.fixViewer,"remove"),n()?(h.viewer.mainImage.removeEventListener("touchstart",h.swipeStart),h.viewer.mainImage.removeEventListener("touchend",h.swipeEnd),h.viewer.mainImage.removeEventListener("touchmove",h.swipeMove)):(h.viewer.nextBtn.removeEventListener("click",h.nextImage),h.viewer.prevBtn.removeEventListener("click",h.prevImage))},addCSSLink:function(){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",h.config.path+"styles/walnut.css"),document.getElementsByTagName("head")[0].appendChild(e)},indexImages:function(){for(var e=0;e<this.CONTAINERS.length;e++){this.containerArray.push({container:this.CONTAINERS[e],images:[]}),this.CONTAINERS[e].setAttribute("data-walnut-container",e);var t=this.CONTAINERS[e].getElementsByTagName("img"),n=this.CONTAINERS[e].getElementsByClassName("walnut-image"),i=this.CONTAINERS[e].querySelectorAll("[walnut-image]"),r=[];if(n)for(var a=0;a<n.length;a++)r.push(n[a]);if(i)for(var a=0;a<i.length;a++)r.push(i[a]);if(t)for(var a=0;a<t.length;a++)r.push(t[a]);for(var l=0;l<r.length;l++){r[l].addEventListener("click",h.openViewer),r[l].setAttribute("data-walnut-index",l);var c;if(r[l].src)c=r[l].src;else{var s=r[l].currentStyle||window.getComputedStyle(r[l],!1);c=s.backgroundImage.slice(4,-1).replace(/"/g,"")}this.containerArray[e].images.push({elem:r[l],src:c,index:l})}}},buildViewer:function(){var e=document.createElement("ul"),n=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),a=document.createElement("img"),l=document.createElement("div"),c=document.createElement("div"),s=document.createElement("img"),o=document.createElement("div"),d=document.createElement("img"),u=(document.createElement("img"),document.getElementsByTagName("body")[0]),p=document.createElement("img"),f=document.createElement("div");e.className="walnut__list",n.className="walnut__list-container",a.className="walnut__image",l.className="walnut__image-container",r.className="walnut__box",i.className="walnut__wrapper",c.className="walnut__navigation walnut__navigation--next",s.src=h.config.path+"images/button_to_right.svg",s.className="walnut__navigation-img",o.className="walnut__navigation walnut__navigation--prev",d.src=h.config.path+"images/button_to_left.svg",d.className="walnut__navigation-img",p.className="walnut__direction-arrow",f.className="walnut__direction-line",c.appendChild(g),o.appendChild(m),f.appendChild(p),l.appendChild(a),l.appendChild(c),l.appendChild(o),l.appendChild(f),n.appendChild(e),r.appendChild(l),r.appendChild(n),i.appendChild(v),i.appendChild(r),u.appendChild(i),t()&&i.appendChild(w),h.body=u,h.viewer.closeBtn=v,h.viewer.nextBtn=c,h.viewer.prevBtn=o,h.viewer.fullscreenBtn=w,h.viewer.mainImage=a,h.viewer.wrapper=i,h.viewer.list=e,h.viewer.directionArrow=p,h.viewer.directionLine=f,h.viewer.box=r},openViewer:function(t){var n,i;i=e(t.target,"walnut"),h.containerIndex=i.getAttribute("data-walnut-container"),h.setImages(),n=this.getAttribute("data-walnut-index"),n=parseInt(n);var r;if(this.src)r=this.src;else{var a=this.currentStyle||window.getComputedStyle(this,!1);r=a.backgroundImage.slice(4,-1).replace(/"/g,"")}h.viewer.mainImage.src=r,h.viewer.mainImage.setAttribute("data-walnut-index",n),h.body.classList.add("walnut--open"),0===n&&n===h.containerArray[h.containerIndex].images.length-1?(h.viewer.prevBtn.style.display="none",h.viewer.nextBtn.style.display="none"):0===n?(h.viewer.prevBtn.style.display="none",h.viewer.nextBtn.style.display=""):n===h.containerArray[h.containerIndex].images.length-1?(h.viewer.nextBtn.style.display="none",h.viewer.prevBtn.style.display=""):(h.viewer.prevBtn.style.display="",h.viewer.nextBtn.style.display=""),h.initEvents(),h.checkHeight(),h.fixList(),h.viewer.wrapper.classList.add("walnut__wrapper--open")},setImages:function(e){var t;if(h.viewer.list.innerHTML="",this.containerArray[h.containerIndex].images.length>1)for(var n=0;n<this.containerArray[h.containerIndex].images.length;n++)t=document.createElement("li"),t.className="walnut__item",t.style.backgroundImage="url("+h.containerArray[h.containerIndex].images[n].src+")",t.setAttribute("data-walnut-source",h.containerArray[h.containerIndex].images[n].src),t.setAttribute("data-walnut-index",h.containerArray[h.containerIndex].images[n].index),t.addEventListener("click",function(){var e=this.getAttribute("data-walnut-source");h.changeImage(null,{source:e,index:this.getAttribute("data-walnut-index"),container:null})}),h.viewer.list.appendChild(t)},fixList:function(){var e=document.querySelector(".walnut__item").offsetWidth;document.querySelector(".walnut__list").style.width=h.containerArray[h.containerIndex].images.length*e+"px"},closeViewer:function(){h.viewer.mainImage.src="",h.viewer.wrapper.classList.remove("walnut__wrapper--open"),h.body.classList.remove("walnut--open"),h.deinitEvents(),h.fullscreen("exit")},changeImage:function(e,t){var n=0;if("undefined"!=typeof e&&null!==e){if(n=h.viewer.mainImage.getAttribute("data-walnut-index"),n=parseInt(n),"next"===e&&n<h.containerArray[h.containerIndex].images.length-1)n+=1;else{if(!("prev"===e&&n>0))return;n-=1}h.containerArray[h.containerIndex].images[n]&&(h.viewer.mainImage.src=h.containerArray[h.containerIndex].images[n].src,h.viewer.mainImage.setAttribute("data-walnut-index",n))}else"undefined"!=typeof t&&(n=parseInt(t.index),h.viewer.mainImage.src=t.source,h.viewer.mainImage.setAttribute("data-walnut-index",n));0===n&&n===h.containerArray[h.containerIndex].images.length-1?(h.viewer.prevBtn.style.display="none",h.viewer.nextBtn.style.display="none"):0===n?(h.viewer.prevBtn.style.display="none",h.viewer.nextBtn.style.display=""):n===h.containerArray[h.containerIndex].images.length-1?(h.viewer.nextBtn.style.display="none",h.viewer.prevBtn.style.display=""):(h.viewer.prevBtn.style.display="",h.viewer.nextBtn.style.display=""),h.checkHeight()},fixViewer:function(){h.checkHeight(),h.fixList()},checkHeight:function(){var e=h.viewer.box.offsetHeight;e>window.innerHeight?h.viewer.wrapper.classList.add("walnut--align-top"):h.viewer.wrapper.classList.remove("walnut--align-top")},checkKeyPressed:function(e){var t=e.keyCode;37===t?h.changeImage("prev"):39===t?h.changeImage("next"):27===t&&h.closeViewer()},clickWrapper:function(e){e.stopPropagation(),e.preventDefault(),e.target===this&&h.closeViewer.call(this)},fullscreen:function(e){var t=document.querySelector(".walnut__wrapper");"exit"===e?(a(),t.querySelector(".walnut__fullscreen").classList.remove("walnut__fullscreen--hidden")):(r(t),t.querySelector(".walnut__fullscreen").classList.add("walnut__fullscreen--hidden"))},nextImage:function(){h.changeImage.call(this,"next")},prevImage:function(){h.changeImage.call(this,"prev")},swipeStart:function(e){var t=e.changedTouches[0];h.touchStartX=parseInt(t.clientX),h.touchStartY=parseInt(t.clientY),e.preventDefault()},swipeMove:function(e){var t,n,i=e.changedTouches[0],r=parseInt(i.clientX),a=parseInt(i.clientY),l=h.viewer.mainImage.getAttribute("data-walnut-index");t=Math.abs(r-h.touchStartX),n=Math.abs(a-h.touchStartY),h.viewer.directionLine.style.width=40+t+"px",h.touchStartX>r&&n<h.allowedTouchDistance&&l<h.containerArray[h.containerIndex].images.length-1?(h.viewer.directionLine.classList.remove("walnut__direction-line--active-left"),h.viewer.directionLine.classList.add("walnut__direction-line--active"),h.viewer.directionLine.classList.add("walnut__direction-line--active-right"),h.viewer.directionArrow.src=h.config.path+"images/button_to_right.svg"):h.touchStartX>r&&n<h.allowedTouchDistance?(h.viewer.directionLine.classList.remove("walnut__direction-line--active-left"),h.viewer.directionLine.classList.add("walnut__direction-line--active"),h.viewer.directionLine.classList.add("walnut__direction-line--active-right"),h.viewer.directionArrow.src=h.config.path+"images/button_close_filled.svg"):h.touchStartX<r&&n<h.allowedTouchDistance&&l>0?(h.viewer.directionLine.classList.remove("walnut__direction-line--active-right"),h.viewer.directionLine.classList.add("walnut__direction-line--active"),h.viewer.directionLine.classList.add("walnut__direction-line--active-left"),h.viewer.directionArrow.src=h.config.path+"images/button_to_left.svg"):h.touchStartX<r&&n<h.allowedTouchDistance?(h.viewer.directionLine.classList.remove("walnut__direction-line--active-right"),h.viewer.directionLine.classList.add("walnut__direction-line--active"),h.viewer.directionLine.classList.add("walnut__direction-line--active-left"),h.viewer.directionArrow.src=h.config.path+"images/button_close_filled.svg"):(h.viewer.directionLine.classList.remove("walnut__direction-line--active"),h.viewer.directionLine.classList.remove("walnut__direction-line--active-left"),h.viewer.directionLine.classList.remove("walnut__direction-line--active-right")),e.preventDefault()},swipeEnd:function(e){var t=e.changedTouches[0],n=parseInt(t.clientX),i=parseInt(t.clientY),r=Math.abs(i-h.touchStartY),a=Math.abs(n-h.touchStartX);h.touchEnd=n,e.preventDefault(),h.viewer.directionLine.classList.remove("walnut__direction-line--active"),h.viewer.directionLine.classList.remove("walnut__direction-line--active-left"),h.viewer.directionLine.classList.remove("walnut__direction-line--active-right"),h.touchStartX>h.touchEnd&&a>h.minTouchDistance&&r<h.allowedTouchDistance?h.nextImage():h.touchStartX<h.touchEnd&&a>h.minTouchDistance&&r<h.allowedTouchDistance&&h.prevImage()}};h.init()}();var closeBtn='<svg class="walnut__close" viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.4"><path fill="#fff" d="M21.6 61.6l38.8-39L775 737.3l-39 39z"/><path fill="#fff" d="M21.6 61.6l38.8-39L775 737.3l-39 39z"/><path fill="#fff" d="M2.8 80.4L80.3 3l714.4 714.3-77.5 77.5z"/><path fill="#fff" d="M797.7 82.5L717.2 2 2.8 716.4 83.2 797z"/></svg>';